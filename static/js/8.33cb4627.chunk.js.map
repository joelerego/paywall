{"version":3,"sources":["server/api.js","util/httpStatus.js","server/crossStorage.js","visitor/authentication/LoginForm.js","visitor/authentication/Login.js"],"names":["defaultClient","version","prefix","process","REACT_APP_API_URL","createUser","firstName","lastName","emailAddress","password","axios","post","createSession","newClient","module","exports","OK","CREATED","ACCEPTED","NO_CONTENT","BAD_REQUEST","UNAUTHORIZED","FORBIDDEN","NOT_FOUND","INTERNAL_SERVER_ERROR","newCrossStorage","a","result","crossStorage","CrossStorageClient","REACT_APP_WEBSITE_URL","onConnect","connection","useStyles","makeStyles","theme","root","display","flexDirection","justifyContent","alignItems","item","width","margin","LoginForm","props","handleErrorMessage","classes","useState","identifier","setIdentifier","setPassword","history","useHistory","handleLogin","client","response","user","JSON","stringify","data","set","window","location","REACT_APP_CONSOLE_URL","console","log","push","status","httpStatus","message","className","TextField","type","name","label","InputProps","endAdornment","InputAdornment","position","Icon","color","variant","required","value","onChange","event","target","validations","minLength","validationErrors","Button","disabled","onClick","height","background","palette","primary","contrastText","marginBottom","breakpoints","down","header","marginTop","textAlign","card","paddingLeft","paddingRight","content","padding","cardTitle","error","form","links","link","textDecoration","Login","errorMessage","setErrorMessage","useEffect","document","title","Grid","container","Hidden","smDown","xs","Typography","md","Card","CardContent","clasName","mdUp","to"],"mappings":"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","file":"static/js/8.33cb4627.chunk.js","sourcesContent":["/*\n * Copyright 2017-2020 Samuel Rowe, Joel E. Rego\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport axios from \"axios\";\n\nconst DEFAULT_API_VERSION = \"v1\";\n\nexport function newClient(version = DEFAULT_API_VERSION) {\n    const prefix = `${process.env.REACT_APP_API_URL}/api/${version}`;\n    return {\n        createUser: (firstName, lastName, emailAddress, password) =>\n            axios.post(`${prefix}/users`, {\n                firstName,\n                lastName,\n                emailAddress,\n                password,\n            }),\n        createSession: (emailAddress, password) =>\n            axios.post(`${prefix}/sessions`, {\n                emailAddress,\n                password,\n            }),\n    };\n}\n\nconst defaultClient = newClient();\n\nexport default defaultClient;\n","/*\n * Copyright 2017-2020 Samuel Rowe, Joel E. Rego\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = {\n    OK: 200,\n    CREATED: 201,\n    ACCEPTED: 202,\n    NO_CONTENT: 204,\n    BAD_REQUEST: 400,\n    UNAUTHORIZED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    INTERNAL_SERVER_ERROR: 500,\n};\n","/*\n * Copyright 2017-2020 Samuel Rowe, Joel E. Rego\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport crossStorage from \"cross-storage\";\n\nconst newCrossStorage = async () => {\n    const result = new crossStorage.CrossStorageClient(\n        `${process.env.REACT_APP_WEBSITE_URL}/hub.html`\n    );\n    await result.onConnect();\n    return result;\n};\n\nexport default {\n    connection: newCrossStorage(),\n};\n","import React, { useState } from \"react\";\nimport {\n    Button,\n    InputAdornment,\n    Icon,\n    TextField,\n    makeStyles,\n} from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport client from \"../../server/api\";\nimport httpStatus from \"../../util/httpStatus\";\nimport crossStorage from \"../../server/crossStorage\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    item: {\n        width: \"100%\",\n        margin: 8,\n    },\n}));\n\nfunction LoginForm(props) {\n    const { handleErrorMessage } = props;\n    const classes = useStyles();\n    const [identifier, setIdentifier] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const history = useHistory();\n\n    const canSubmit = () => identifier && password;\n    const handleLogin = async () => {\n        try {\n            const response = await client.createSession(identifier, password);\n            const user = JSON.stringify(response.data);\n\n            try {\n                const client = await crossStorage.connection;\n                client.set(\"user\", user);\n                window.location = `${process.env.REACT_APP_CONSOLE_URL}/analytics`;\n            } catch (error) {\n                console.log(\n                    \"Cannot establish connection to the cross storage hub.\"\n                );\n                console.log(error);\n                history.push(\"/error/500\");\n            }\n        } catch (error) {\n            const { response } = error;\n            if (response && response.status === httpStatus.BAD_REQUEST) {\n                handleErrorMessage(response.data.message);\n            } else {\n                console.log(response);\n                history.push(\"/error/500\");\n            }\n        }\n    };\n\n    return (\n        <div className={classes.root}>\n            <TextField\n                className={classes.item}\n                type=\"text\"\n                name=\"emailAddress\"\n                label=\"Email Address\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                email\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={identifier}\n                onChange={(event) => setIdentifier(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"password\"\n                name=\"password\"\n                label=\"Password\"\n                validations={{\n                    minLength: 4,\n                }}\n                validationErrors={{\n                    minLength: \"Minimum character length is 4.\",\n                }}\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                vpn_key\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={password}\n                onChange={(event) => setPassword(event.target.value)}\n            />\n\n            <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"secondary\"\n                className={classes.item}\n                disabled={!canSubmit()}\n                onClick={handleLogin}\n                value=\"firebase\"\n            >\n                Login\n            </Button>\n        </div>\n    );\n}\n\nexport default LoginForm;\n","import React, { useEffect, useState } from \"react\";\nimport {\n    makeStyles,\n    Card,\n    CardContent,\n    Typography,\n    Hidden,\n} from \"@material-ui/core\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LoginForm from \"./LoginForm\";\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: 400,\n        background: \"linear-gradient(45deg, #2196F3 30%, #3F51B5 90%)\",\n        color: theme.palette.primary.contrastText,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        marginBottom: 200,\n        [theme.breakpoints.down(\"sm\")]: {\n            height: 250,\n        },\n    },\n    header: {\n        margin: 32,\n        marginTop: 128,\n        textAlign: \"center\",\n    },\n    card: {\n        paddingLeft: 16,\n        paddingRight: 16,\n        textAlign: \"center\",\n        [theme.breakpoints.down(\"sm\")]: {\n            marginTop: 64,\n        },\n    },\n    content: {\n        padding: 16,\n    },\n    cardTitle: {\n        marginTop: 16,\n        marginBottom: 16,\n        color: \"#5F6368\",\n        textAlign: \"center\",\n    },\n    error: {\n        marginTop: 16,\n        marginBottom: 16,\n        textAlign: \"center\",\n    },\n    form: {\n        margin: 16,\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    links: {\n        marginTop: 16,\n    },\n    link: {\n        display: \"block\",\n        marginTop: 8,\n        textDecoration: \"none\",\n    },\n}));\n\nfunction Login(props) {\n    const classes = useStyles();\n    const [errorMessage, setErrorMessage] = useState(\"\");\n\n    useEffect(() => {\n        document.title = \"Login | Paywall\";\n    }, []);\n\n    return (\n        <Grid container={true} className={classes.root}>\n            <Hidden smDown={true}>\n                <Grid item={true} className={classes.header} xs={12}>\n                    <Typography variant=\"h3\">Login to your account</Typography>\n                    <Typography variant=\"h5\">\n                        One step away from awesomeness\n                    </Typography>\n                </Grid>\n            </Hidden>\n\n            <Grid item={true} xs={12} md={3} className={classes.card}>\n                <Card>\n                    <CardContent clasName={classes.content}>\n                        <Hidden mdUp={true}>\n                            <Typography\n                                variant=\"h5\"\n                                className={classes.cardTitle}\n                            >\n                                Login to your account\n                            </Typography>\n                        </Hidden>\n\n                        {errorMessage && (\n                            <Typography className={classes.error} color=\"error\">\n                                {errorMessage}\n                            </Typography>\n                        )}\n                        <LoginForm handleErrorMessage={setErrorMessage} />\n                        <div className={classes.links}>\n                            <Hidden mdUp={true}>\n                                <Link className={classes.link} to=\"/register\">\n                                    Create Account\n                                </Link>\n                            </Hidden>\n                            <Link\n                                className={classes.link}\n                                to=\"/forgot-password\"\n                            >\n                                Recover Account\n                            </Link>\n                        </div>\n                    </CardContent>\n                </Card>\n            </Grid>\n        </Grid>\n    );\n}\n\nexport default Login;\n"],"sourceRoot":""}