{"version":3,"sources":["server/api.js","util/httpStatus.js","server/crossStorage.js","visitor/authentication/RegisterForm.js","visitor/authentication/Register.js"],"names":["defaultClient","version","prefix","process","REACT_APP_API_URL","createUser","firstName","lastName","emailAddress","password","axios","post","createSession","newClient","module","exports","OK","CREATED","ACCEPTED","NO_CONTENT","BAD_REQUEST","UNAUTHORIZED","FORBIDDEN","NOT_FOUND","INTERNAL_SERVER_ERROR","newCrossStorage","a","result","crossStorage","CrossStorageClient","REACT_APP_WEBSITE_URL","onConnect","connection","useStyles","makeStyles","theme","root","display","flexDirection","justifyContent","alignItems","item","width","margin","RegisterForm","props","handleErrorMessage","classes","useState","setFirstName","setLastName","setEmailAddress","setPassword","confirmPassword","setConfirmPassword","history","useHistory","handleRegister","client","response","user","JSON","stringify","data","set","window","location","REACT_APP_CONSOLE_URL","console","log","push","status","httpStatus","message","className","TextField","type","name","label","InputProps","endAdornment","InputAdornment","position","Icon","color","variant","required","value","onChange","event","target","Button","disabled","onClick","height","background","palette","primary","contrastText","justify","marginBottom","breakpoints","down","header","marginTop","textAlign","card","paddingLeft","paddingRight","cardTitle","error","form","links","link","textDecoration","Register","errorMessage","setErrorMessage","useEffect","document","title","Grid","container","Hidden","smDown","xs","Typography","md","Card","CardContent","mdUp","to"],"mappings":"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","file":"static/js/9.8463b1a7.chunk.js","sourcesContent":["/*\n * Copyright 2017-2020 Samuel Rowe, Joel E. Rego\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport axios from \"axios\";\n\nconst DEFAULT_API_VERSION = \"v1\";\n\nexport function newClient(version = DEFAULT_API_VERSION) {\n    const prefix = `${process.env.REACT_APP_API_URL}/api/${version}`;\n    return {\n        createUser: (firstName, lastName, emailAddress, password) =>\n            axios.post(`${prefix}/users`, {\n                firstName,\n                lastName,\n                emailAddress,\n                password,\n            }),\n        createSession: (emailAddress, password) =>\n            axios.post(`${prefix}/sessions`, {\n                emailAddress,\n                password,\n            }),\n    };\n}\n\nconst defaultClient = newClient();\n\nexport default defaultClient;\n","/*\n * Copyright 2017-2020 Samuel Rowe, Joel E. Rego\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = {\n    OK: 200,\n    CREATED: 201,\n    ACCEPTED: 202,\n    NO_CONTENT: 204,\n    BAD_REQUEST: 400,\n    UNAUTHORIZED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    INTERNAL_SERVER_ERROR: 500,\n};\n","/*\n * Copyright 2017-2020 Samuel Rowe, Joel E. Rego\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport crossStorage from \"cross-storage\";\n\nconst newCrossStorage = async () => {\n    const result = new crossStorage.CrossStorageClient(\n        `${process.env.REACT_APP_WEBSITE_URL}/hub.html`\n    );\n    await result.onConnect();\n    return result;\n};\n\nexport default {\n    connection: newCrossStorage(),\n};\n","import React, { useState } from \"react\";\nimport {\n    Button,\n    InputAdornment,\n    Icon,\n    TextField,\n    makeStyles,\n} from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport client from \"../../server/api\";\nimport httpStatus from \"../../util/httpStatus\";\nimport crossStorage from \"../../server/crossStorage\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    item: {\n        width: \"100%\",\n        margin: 8,\n    },\n}));\n\nfunction RegisterForm(props) {\n    const { handleErrorMessage } = props;\n    const classes = useStyles();\n    const [firstName, setFirstName] = useState(\"\");\n    const [lastName, setLastName] = useState(\"\");\n    const [emailAddress, setEmailAddress] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [confirmPassword, setConfirmPassword] = useState(\"\");\n    const history = useHistory();\n\n    const canSubmit = () => {\n        return (\n            firstName &&\n            lastName &&\n            emailAddress &&\n            password &&\n            password === confirmPassword\n        );\n    };\n    const handleRegister = async () => {\n        try {\n            const response = await client.createUser(\n                firstName,\n                lastName,\n                emailAddress,\n                password\n            );\n            const user = JSON.stringify(response.data);\n            try {\n                const client = await crossStorage.connection;\n                client.set(\"user\", user);\n                window.location = `${process.env.REACT_APP_CONSOLE_URL}/analytics`;\n            } catch (error) {\n                console.log(\n                    \"Cannot establish connection to the cross storage hub.\"\n                );\n                console.log(error);\n                history.push(\"/error/500\");\n            }\n        } catch (error) {\n            const { response } = error;\n            if (response && response.status === httpStatus.BAD_REQUEST) {\n                handleErrorMessage(response.data.message);\n            } else {\n                console.log(response);\n                history.push(\"/error/500\");\n            }\n        }\n    };\n\n    return (\n        <div className={classes.root}>\n            <TextField\n                className={classes.item}\n                type=\"text\"\n                name=\"firstName\"\n                label=\"First Name\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon color=\"action\">person</Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={firstName}\n                onChange={(event) => setFirstName(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"text\"\n                name=\"lastName\"\n                label=\"Last Name\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon color=\"action\">person</Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={lastName}\n                onChange={(event) => setLastName(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"text\"\n                name=\"email\"\n                label=\"Email\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                email\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={emailAddress}\n                onChange={(event) => setEmailAddress(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"password\"\n                name=\"password\"\n                label=\"Password\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                vpn_key\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={password}\n                onChange={(event) => setPassword(event.target.value)}\n            />\n\n            <TextField\n                className={classes.item}\n                type=\"password\"\n                name=\"confirmPassword\"\n                label=\"Confirm Password\"\n                InputProps={{\n                    endAdornment: (\n                        <InputAdornment position=\"end\">\n                            <Icon className=\"text-20\" color=\"action\">\n                                vpn_key\n                            </Icon>\n                        </InputAdornment>\n                    ),\n                }}\n                variant=\"outlined\"\n                required={true}\n                value={confirmPassword}\n                onChange={(event) => setConfirmPassword(event.target.value)}\n            />\n\n            <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.item}\n                disabled={!canSubmit()}\n                onClick={handleRegister}\n                value=\"legacy\"\n            >\n                Register\n            </Button>\n        </div>\n    );\n}\n\nexport default RegisterForm;\n","import React, { useEffect, useState } from \"react\";\nimport {\n    makeStyles,\n    Card,\n    CardContent,\n    Typography,\n    Hidden,\n} from \"@material-ui/core\";\nimport Grid from \"@material-ui/core/Grid\";\nimport RegisterForm from \"./RegisterForm\";\nimport { Link } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        height: 400,\n        background: \"linear-gradient(45deg, #2196F3 30%, #3F51B5 90%)\",\n        color: theme.palette.primary.contrastText,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        justify: \"center\",\n        marginBottom: 400,\n        [theme.breakpoints.down(\"sm\")]: {\n            height: 250,\n        },\n    },\n    header: {\n        margin: 32,\n        marginTop: 128,\n        textAlign: \"center\",\n    },\n    card: {\n        paddingLeft: 16,\n        paddingRight: 16,\n        textAlign: \"center\",\n        [theme.breakpoints.down(\"sm\")]: {\n            marginTop: 64,\n        },\n    },\n    cardTitle: {\n        marginTop: 16,\n        marginBottom: 16,\n        color: \"#5F6368\",\n        textAlign: \"center\",\n    },\n    error: {\n        marginTop: 16,\n        marginBottom: 16,\n        textAlign: \"center\",\n    },\n    form: {\n        margin: 16,\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    links: {\n        marginTop: 16,\n    },\n    link: {\n        display: \"block\",\n        marginTop: 8,\n        textDecoration: \"none\",\n    },\n}));\n\nfunction Register(props) {\n    const classes = useStyles();\n    const [errorMessage, setErrorMessage] = useState(\"\");\n\n    useEffect(() => {\n        document.title = \"Register | Paywall\";\n    }, []);\n\n    return (\n        <Grid container={true} className={classes.root}>\n            <Hidden smDown={true}>\n                <Grid item={true} className={classes.header} xs={12}>\n                    <Typography variant=\"h3\">Create your account</Typography>\n                    <Typography variant=\"h5\">\n                        One step away from awesomeness\n                    </Typography>\n                </Grid>\n            </Hidden>\n\n            <Grid item={true} xs={12} md={3} className={classes.card}>\n                <Card>\n                    <CardContent>\n                        <Hidden mdUp={true}>\n                            <Typography\n                                variant=\"h5\"\n                                className={classes.cardTitle}\n                            >\n                                Create your account\n                            </Typography>\n                        </Hidden>\n                        {errorMessage && (\n                            <Typography className={classes.error} color=\"error\">\n                                {errorMessage}\n                            </Typography>\n                        )}\n                        <RegisterForm handleErrorMessage={setErrorMessage} />\n                        <div className={classes.links}>\n                            <Hidden mdUp={true}>\n                                <Link className={classes.link} to=\"/login\">\n                                    Login\n                                </Link>\n                            </Hidden>\n                            <Link\n                                className={classes.link}\n                                to=\"/forgot-password\"\n                            >\n                                Recover Account\n                            </Link>\n                        </div>\n                    </CardContent>\n                </Card>\n            </Grid>\n        </Grid>\n    );\n}\n\nexport default Register;\n"],"sourceRoot":""}